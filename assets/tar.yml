type: "application/x-tar"
endian: "little"
wordlength: 32
comments: "Basic tar format, https://www.gnu.org/software/tar/manual/html_node/Standard.html"
codecs:
  - name: octal
    type: number
    decode: "parseInt(str(value), 8)"
    encode: "parseInt(str(value), 10).toString(8)"
content:
  - type: repeat
    until:
      - type: container
        ref: end clearence
        content:
          - type: fixed
            ref: empty block
            size: 512
            constraints:
              - type: isNull
          - type: fixed
            ref: empty block
            size: 512
            constraints:
              - type: isNull
    do:
      - type: container
        ref: entry
        content:
        - type: container
          ref: header
          size: 512
          content:
          - type: fixed
            ref: name
            size: 100
            codec: cstring
          - type: fixed
            ref: mode
            size: 8
            codec: octal
          - type: fixed
            ref: uid
            size: 8
            codec: cstring
          - type: fixed
            ref: gid
            size: 8
            codec: cstring
          - type: fixed
            ref: size
            size: 12
            codec: octal
          - type: fixed
            ref: mtime
            size: 12
            codec: octal
          - type: fixed
            ref: chksum
            size: 8
            codec: octal
          - type: fixed
            ref: typeflag
            size: 1
          - type: fixed
            ref: linkname
            size: 100
            codec: cstring
          - type: fixed
            ref: magic
            size: 6
            codec: cstring
          - type: fixed
            ref: version
            size: 2
            codec: octal
          - type: fixed
            ref: uname
            size: 32
            codec: cstring
          - type: fixed
            ref: gname
            size: 32
            codec: cstring
          - type: fixed
            ref: devmajor
            size: 8
            codec: cstring
          - type: fixed
            ref: devminor
            size: 8
            codec: cstring
          - type: fixed
            ref: prefix
            size: 131
            codec: cstring
        - type: if
          cond: "$header/size > 0"
          then:
          - type: fixed
            ref: content
            size: "$header/size"
          - type: fixed
            ref: padding
            size: "512 - $header/size % 512"
  - type: container
    ref: end clearence
    content:
      - type: fixed
        ref: empty block
        size: 512
        constraints:
          - type: isNull
      - type: fixed
        ref: empty block
        size: 512
        constraints:
          - type: isNull
